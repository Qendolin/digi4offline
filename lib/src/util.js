"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResponseError=exports.DetailError=void 0,exports.findRanges=findRanges,exports.retryAsync=retryAsync,exports.toArrayBuffer=toArrayBuffer;async function retryAsync(a,b){a=Math.max(a,1);do{const c=await b();if(c!==void 0)return c;a--}while(0<a)}function findRanges(a){return[...a].sort((c,a)=>c-a).reduce((a,b,c)=>(0===c?(a.ranges.push(b),a.rangeStart=b):b===a.last+1?a.ranges[a.ranges.length-1]=a.rangeStart+"-"+b:(a.ranges.push(b),a.rangeStart=b),a.last=b,a),{ranges:[],rangeStart:null,last:null}).ranges.join("_")}function toArrayBuffer(a){return a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}class DetailError extends Error{constructor(a,b){super(a),this.detail=b}}exports.DetailError=DetailError;class ResponseError extends DetailError{constructor(a,b){super(`${a}: invalid response: ${b.status}`,b)}}exports.ResponseError=ResponseError;